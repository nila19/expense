/* global inject, expect*/
/* eslint no-console: "off", no-magic-numbers: "off", max-len: "off" */

'use strict';

// ====================== Test Cases ======================//
describe('explist.service', function () {
  before('do nothing', function () {});
  // case #0
  describe('Execute all functions', function () {
    let explistService = null;

    beforeEach('prepare app', function () {
      module('app');
      inject(function (_explistService_) {
        explistService = _explistService_;
      });
    });
    it('should loadCurrentPage', function () {
      explistService.data.rows = [{id: 8771, cityId: 20140301, entryDt: '2017-06-12T00:15:54-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8771, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22030.68, balanceAf: 21980.43}, to: {id: 60, name: 'BOA Visa', balanceBf: 11377.82, balanceAf: 11327.57}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8770, cityId: 20140301, entryDt: '2017-06-12T00:15:34-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8770, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22080.93, balanceAf: 22030.68}, to: {id: 60, name: 'BOA Visa', balanceBf: 11428.07, balanceAf: 11377.82}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8769, cityId: 20140301, entryDt: '2017-06-12T00:12:47-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8769, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22131.18, balanceAf: 22080.93}, to: {id: 60, name: 'BOA Visa', balanceBf: 11478.32, balanceAf: 11428.07}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8768, cityId: 20140301, entryDt: '2017-06-12T00:10:21-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8768, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22181.43, balanceAf: 22131.18}, to: {id: 60, name: 'BOA Visa', balanceBf: 11528.57, balanceAf: 11478.32}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8767, cityId: 20140301, entryDt: '2017-06-12T00:09:44-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8767, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22231.68, balanceAf: 22181.43}, to: {id: 60, name: 'BOA Visa', balanceBf: 11578.82, balanceAf: 11528.57}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8766, cityId: 20140301, entryDt: '2017-06-12T00:05:16-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8766, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22281.93, balanceAf: 22231.68}, to: {id: 60, name: 'BOA Visa', balanceBf: 11629.07, balanceAf: 11578.82}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8763, cityId: 20140301, entryDt: '2017-06-12T00:04:37-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8763, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22332.18, balanceAf: 22281.93}, to: {id: 60, name: 'BOA Visa', balanceBf: 11679.32, balanceAf: 11629.07}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8571, cityId: 20140301, entryDt: '2017-04-17T15:12:23-05:00', entryMonth: '2017-04-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50, transDt: '2017-04-12', transMonth: '2017-04-01', seq: 8571, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22598.88, balanceAf: 22548.88}, to: {id: 83, name: 'Chase Freedom', balanceBf: -801.74, balanceAf: -851.74}}, adhoc: false, adjust: true, status: true, tallied: false, tallyDt: null}, {id: 8570, cityId: 20140301, entryDt: '2017-04-17T15:10:05-05:00', entryMonth: '2017-04-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 100, transDt: '2017-04-11', transMonth: '2017-04-01', seq: 8570, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22698.88, balanceAf: 22598.88}, to: {id: 60, name: 'BOA Visa', balanceBf: 10875.58, balanceAf: 10775.58}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8569, cityId: 20140301, entryDt: '2017-04-17T15:08:25-05:00', entryMonth: '2017-04-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: null, transDt: '2017-04-12', transMonth: '2017-04-01', seq: 8569, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22698.88, balanceAf: 22698.88}, to: {id: 60, name: 'BOA Visa', balanceBf: 10875.58, balanceAf: 10875.58}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}];
      explistService.data.rowCount = 4;
      expect(explistService.data.pgData.rows).to.be.empty;

      explistService.data.currPageNo = 1;
      explistService.loadCurrentPage();
      expect(explistService.data.pgData.rows.length).to.equal(4);

      explistService.data.currPageNo = 2;
      explistService.loadCurrentPage();
      expect(explistService.data.pgData.rows.length).to.equal(2);
    });
    it('should loadData', function () {
      const dt = [{id: 8771, cityId: 20140301, entryDt: '2017-06-12T00:15:54-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8771, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22030.68, balanceAf: 21980.43}, to: {id: 60, name: 'BOA Visa', balanceBf: 11377.82, balanceAf: 11327.57}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8770, cityId: 20140301, entryDt: '2017-06-12T00:15:34-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8770, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22080.93, balanceAf: 22030.68}, to: {id: 60, name: 'BOA Visa', balanceBf: 11428.07, balanceAf: 11377.82}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8769, cityId: 20140301, entryDt: '2017-06-12T00:12:47-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8769, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22131.18, balanceAf: 22080.93}, to: {id: 60, name: 'BOA Visa', balanceBf: 11478.32, balanceAf: 11428.07}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8768, cityId: 20140301, entryDt: '2017-06-12T00:10:21-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8768, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22181.43, balanceAf: 22131.18}, to: {id: 60, name: 'BOA Visa', balanceBf: 11528.57, balanceAf: 11478.32}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8767, cityId: 20140301, entryDt: '2017-06-12T00:09:44-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8767, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22231.68, balanceAf: 22181.43}, to: {id: 60, name: 'BOA Visa', balanceBf: 11578.82, balanceAf: 11528.57}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8766, cityId: 20140301, entryDt: '2017-06-12T00:05:16-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8766, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22281.93, balanceAf: 22231.68}, to: {id: 60, name: 'BOA Visa', balanceBf: 11629.07, balanceAf: 11578.82}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8763, cityId: 20140301, entryDt: '2017-06-12T00:04:37-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8763, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22332.18, balanceAf: 22281.93}, to: {id: 60, name: 'BOA Visa', balanceBf: 11679.32, balanceAf: 11629.07}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8571, cityId: 20140301, entryDt: '2017-04-17T15:12:23-05:00', entryMonth: '2017-04-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50, transDt: '2017-04-12', transMonth: '2017-04-01', seq: 8571, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22598.88, balanceAf: 22548.88}, to: {id: 83, name: 'Chase Freedom', balanceBf: -801.74, balanceAf: -851.74}}, adhoc: false, adjust: true, status: true, tallied: false, tallyDt: null}, {id: 8570, cityId: 20140301, entryDt: '2017-04-17T15:10:05-05:00', entryMonth: '2017-04-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 100, transDt: '2017-04-11', transMonth: '2017-04-01', seq: 8570, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22698.88, balanceAf: 22598.88}, to: {id: 60, name: 'BOA Visa', balanceBf: 10875.58, balanceAf: 10775.58}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}];

      explistService.data.rowCount = 4;
      explistService.data.currPageSet = 1;
      explistService.data.currPageNo = 1;
      explistService.data.loading = true;
      expect(explistService.data.rows).to.be.empty;
      expect(explistService.data.pgData.rows).to.be.empty;
      expect(explistService.data.maxPageNo).to.equal(0);
      expect(explistService.data.total).to.equal(0);

      explistService.loadData(dt);
      expect(explistService.data.rows.length).to.equal(9);
      expect(explistService.data.pgData.rows.length).to.equal(4);
      expect(explistService.data.maxPageNo).to.equal(2);
      expect(explistService.data.total).to.equal(501.75);
    });
    it('should addItem - user in first page', function () {
      explistService.data.rowCount = 4;
      explistService.data.rows = [{id: 8771, cityId: 20140301, entryDt: '2017-06-12T00:15:54-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8771, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22030.68, balanceAf: 21980.43}, to: {id: 60, name: 'BOA Visa', balanceBf: 11377.82, balanceAf: 11327.57}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8770, cityId: 20140301, entryDt: '2017-06-12T00:15:34-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8770, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22080.93, balanceAf: 22030.68}, to: {id: 60, name: 'BOA Visa', balanceBf: 11428.07, balanceAf: 11377.82}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8769, cityId: 20140301, entryDt: '2017-06-12T00:12:47-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8769, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22131.18, balanceAf: 22080.93}, to: {id: 60, name: 'BOA Visa', balanceBf: 11478.32, balanceAf: 11428.07}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8768, cityId: 20140301, entryDt: '2017-06-12T00:10:21-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8768, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22181.43, balanceAf: 22131.18}, to: {id: 60, name: 'BOA Visa', balanceBf: 11528.57, balanceAf: 11478.32}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8767, cityId: 20140301, entryDt: '2017-06-12T00:09:44-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8767, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22231.68, balanceAf: 22181.43}, to: {id: 60, name: 'BOA Visa', balanceBf: 11578.82, balanceAf: 11528.57}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8766, cityId: 20140301, entryDt: '2017-06-12T00:05:16-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8766, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22281.93, balanceAf: 22231.68}, to: {id: 60, name: 'BOA Visa', balanceBf: 11629.07, balanceAf: 11578.82}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8763, cityId: 20140301, entryDt: '2017-06-12T00:04:37-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8763, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22332.18, balanceAf: 22281.93}, to: {id: 60, name: 'BOA Visa', balanceBf: 11679.32, balanceAf: 11629.07}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8571, cityId: 20140301, entryDt: '2017-04-17T15:12:23-05:00', entryMonth: '2017-04-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50, transDt: '2017-04-12', transMonth: '2017-04-01', seq: 8571, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22598.88, balanceAf: 22548.88}, to: {id: 83, name: 'Chase Freedom', balanceBf: -801.74, balanceAf: -851.74}}, adhoc: false, adjust: true, status: true, tallied: false, tallyDt: null}, {id: 8570, cityId: 20140301, entryDt: '2017-04-17T15:10:05-05:00', entryMonth: '2017-04-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 100, transDt: '2017-04-11', transMonth: '2017-04-01', seq: 8570, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22698.88, balanceAf: 22598.88}, to: {id: 60, name: 'BOA Visa', balanceBf: 10875.58, balanceAf: 10775.58}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}];
      const tr = {id: 8551, cityId: 20140301, entryDt: '2017-06-17T18:31:40-05:00', entryMonth: '2017-06-01', category: {id: 173, name: null}, description: 'ATT', amount: 27.1, transDt: '2017-04-11', transMonth: '2017-04-01', seq: 8894, accounts: {from: {id: 60, name: 'BOA Visa', balanceBf: 11214.13, balanceAf: 11241.23}, to: {id: 0, name: '', balanceBf: 0, balanceAf: -121254.83}}, adhoc: false, adjust: false, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00', bill: {id: 99, account: {id: 60, name: 'BOA Visa'}, billDt: '2017-03-24', name: 'BOA Visa : 2017-03-24 #99'}};

      explistService.data.currPageNo = 0;
      expect(explistService.data.pgData.rows).to.be.empty;
      expect(explistService.data.maxPageNo).to.equal(0);
      expect(explistService.data.total).to.equal(0);
      explistService.loadCurrentPage();

      explistService.addItem(tr);

      expect(_.findIndex(explistService.data.pgData.rows, ['id', 8551])).to.equal(0);
      expect(explistService.data.pgData.rows.length).to.equal(4);
      expect(explistService.data.rows.length).to.equal(10);
      expect(explistService.data.maxPageNo).to.equal(2);
      expect(explistService.data.total).to.equal(528.85);
    });
    it('should addItem - user not in first page', function () {
      explistService.data.rowCount = 4;
      explistService.data.rows = [{id: 8771, cityId: 20140301, entryDt: '2017-06-12T00:15:54-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8771, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22030.68, balanceAf: 21980.43}, to: {id: 60, name: 'BOA Visa', balanceBf: 11377.82, balanceAf: 11327.57}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8770, cityId: 20140301, entryDt: '2017-06-12T00:15:34-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8770, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22080.93, balanceAf: 22030.68}, to: {id: 60, name: 'BOA Visa', balanceBf: 11428.07, balanceAf: 11377.82}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8769, cityId: 20140301, entryDt: '2017-06-12T00:12:47-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8769, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22131.18, balanceAf: 22080.93}, to: {id: 60, name: 'BOA Visa', balanceBf: 11478.32, balanceAf: 11428.07}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8768, cityId: 20140301, entryDt: '2017-06-12T00:10:21-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8768, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22181.43, balanceAf: 22131.18}, to: {id: 60, name: 'BOA Visa', balanceBf: 11528.57, balanceAf: 11478.32}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8767, cityId: 20140301, entryDt: '2017-06-12T00:09:44-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8767, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22231.68, balanceAf: 22181.43}, to: {id: 60, name: 'BOA Visa', balanceBf: 11578.82, balanceAf: 11528.57}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8766, cityId: 20140301, entryDt: '2017-06-12T00:05:16-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8766, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22281.93, balanceAf: 22231.68}, to: {id: 60, name: 'BOA Visa', balanceBf: 11629.07, balanceAf: 11578.82}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8763, cityId: 20140301, entryDt: '2017-06-12T00:04:37-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8763, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22332.18, balanceAf: 22281.93}, to: {id: 60, name: 'BOA Visa', balanceBf: 11679.32, balanceAf: 11629.07}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8571, cityId: 20140301, entryDt: '2017-04-17T15:12:23-05:00', entryMonth: '2017-04-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50, transDt: '2017-04-12', transMonth: '2017-04-01', seq: 8571, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22598.88, balanceAf: 22548.88}, to: {id: 83, name: 'Chase Freedom', balanceBf: -801.74, balanceAf: -851.74}}, adhoc: false, adjust: true, status: true, tallied: false, tallyDt: null}, {id: 8570, cityId: 20140301, entryDt: '2017-04-17T15:10:05-05:00', entryMonth: '2017-04-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 100, transDt: '2017-04-11', transMonth: '2017-04-01', seq: 8570, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22698.88, balanceAf: 22598.88}, to: {id: 60, name: 'BOA Visa', balanceBf: 10875.58, balanceAf: 10775.58}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}];
      const tr = {id: 8344, cityId: 20140301, entryDt: '2017-06-17T18:45:53-05:00', entryMonth: '2017-06-01', category: {id: 181, name: null}, description: 'Costco Returns', amount: 43.28, transDt: '2016-12-03', transMonth: '2016-12-01', seq: 8895, accounts: {from: {id: 60, name: 'BOA Visa', balanceBf: 11257.41, balanceAf: 11214.13}, to: {id: 0, name: '', balanceBf: 0, balanceAf: -121254.83}}, adhoc: true, adjust: false, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00', bill: {id: 108, account: {id: 60, name: 'BOA Visa'}, billDt: '2017-06-24', name: 'BOA Visa : 2017-06-24 #108'}};

      explistService.data.currPageNo = 1;
      expect(explistService.data.pgData.rows).to.be.empty;
      expect(explistService.data.maxPageNo).to.equal(0);
      expect(explistService.data.total).to.equal(0);
      explistService.loadCurrentPage();

      explistService.addItem(tr);

      expect(_.findIndex(explistService.data.pgData.rows, ['id', 8344])).to.equal(-1);
      expect(explistService.data.pgData.rows.length).to.equal(4);
      expect(explistService.data.rows.length).to.equal(10);
      expect(explistService.data.maxPageNo).to.equal(2);
      expect(explistService.data.total).to.equal(545.03);
    });
    it('should modifyItem - user in same page', function () {
      explistService.data.rowCount = 4;
      explistService.data.rows = [{id: 8771, cityId: 20140301, entryDt: '2017-06-12T00:15:54-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8771, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22030.68, balanceAf: 21980.43}, to: {id: 60, name: 'BOA Visa', balanceBf: 11377.82, balanceAf: 11327.57}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8770, cityId: 20140301, entryDt: '2017-06-12T00:15:34-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8770, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22080.93, balanceAf: 22030.68}, to: {id: 60, name: 'BOA Visa', balanceBf: 11428.07, balanceAf: 11377.82}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8769, cityId: 20140301, entryDt: '2017-06-12T00:12:47-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8769, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22131.18, balanceAf: 22080.93}, to: {id: 60, name: 'BOA Visa', balanceBf: 11478.32, balanceAf: 11428.07}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8768, cityId: 20140301, entryDt: '2017-06-12T00:10:21-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8768, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22181.43, balanceAf: 22131.18}, to: {id: 60, name: 'BOA Visa', balanceBf: 11528.57, balanceAf: 11478.32}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8767, cityId: 20140301, entryDt: '2017-06-12T00:09:44-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8767, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22231.68, balanceAf: 22181.43}, to: {id: 60, name: 'BOA Visa', balanceBf: 11578.82, balanceAf: 11528.57}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8766, cityId: 20140301, entryDt: '2017-06-12T00:05:16-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8766, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22281.93, balanceAf: 22231.68}, to: {id: 60, name: 'BOA Visa', balanceBf: 11629.07, balanceAf: 11578.82}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8763, cityId: 20140301, entryDt: '2017-06-12T00:04:37-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8763, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22332.18, balanceAf: 22281.93}, to: {id: 60, name: 'BOA Visa', balanceBf: 11679.32, balanceAf: 11629.07}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8571, cityId: 20140301, entryDt: '2017-04-17T15:12:23-05:00', entryMonth: '2017-04-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50, transDt: '2017-04-12', transMonth: '2017-04-01', seq: 8571, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22598.88, balanceAf: 22548.88}, to: {id: 83, name: 'Chase Freedom', balanceBf: -801.74, balanceAf: -851.74}}, adhoc: false, adjust: true, status: true, tallied: false, tallyDt: null}, {id: 8570, cityId: 20140301, entryDt: '2017-04-17T15:10:05-05:00', entryMonth: '2017-04-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 100, transDt: '2017-04-11', transMonth: '2017-04-01', seq: 8570, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22698.88, balanceAf: 22598.88}, to: {id: 60, name: 'BOA Visa', balanceBf: 10875.58, balanceAf: 10775.58}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}];
      const tr = {id: 8766, cityId: 20140301, entryDt: '2017-06-12T00:05:16-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payments', amount: 150.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8766, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22281.93, balanceAf: 22231.68}, to: {id: 60, name: 'BOA Visa', balanceBf: 11629.07, balanceAf: 11578.82}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'};

      explistService.data.currPageNo = 1;
      expect(explistService.data.pgData.rows).to.be.empty;
      expect(explistService.data.maxPageNo).to.equal(0);
      expect(explistService.data.total).to.equal(0);
      explistService.loadCurrentPage();

      explistService.modifyItem(tr);
      const idx = _.findIndex(explistService.data.pgData.rows, ['id', 8766]);
      const idx2 = _.findIndex(explistService.data.rows, ['id', 8766]);

      expect(idx).to.equal(1);
      expect(explistService.data.pgData.rows.length).to.equal(4);
      expect(explistService.data.rows.length).to.equal(9);
      expect(explistService.data.maxPageNo).to.equal(2);
      expect(explistService.data.total).to.equal(601.75);
      expect(explistService.data.pgData.rows[idx].description).to.equal('CC Bill Payments');
      expect(explistService.data.rows[idx2].description).to.equal('CC Bill Payments');
    });
    it('should modifyItem - user in different page', function () {
      explistService.data.rowCount = 4;
      explistService.data.rows = [{id: 8771, cityId: 20140301, entryDt: '2017-06-12T00:15:54-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8771, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22030.68, balanceAf: 21980.43}, to: {id: 60, name: 'BOA Visa', balanceBf: 11377.82, balanceAf: 11327.57}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8770, cityId: 20140301, entryDt: '2017-06-12T00:15:34-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8770, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22080.93, balanceAf: 22030.68}, to: {id: 60, name: 'BOA Visa', balanceBf: 11428.07, balanceAf: 11377.82}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8769, cityId: 20140301, entryDt: '2017-06-12T00:12:47-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8769, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22131.18, balanceAf: 22080.93}, to: {id: 60, name: 'BOA Visa', balanceBf: 11478.32, balanceAf: 11428.07}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8768, cityId: 20140301, entryDt: '2017-06-12T00:10:21-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8768, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22181.43, balanceAf: 22131.18}, to: {id: 60, name: 'BOA Visa', balanceBf: 11528.57, balanceAf: 11478.32}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8767, cityId: 20140301, entryDt: '2017-06-12T00:09:44-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8767, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22231.68, balanceAf: 22181.43}, to: {id: 60, name: 'BOA Visa', balanceBf: 11578.82, balanceAf: 11528.57}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8766, cityId: 20140301, entryDt: '2017-06-12T00:05:16-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8766, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22281.93, balanceAf: 22231.68}, to: {id: 60, name: 'BOA Visa', balanceBf: 11629.07, balanceAf: 11578.82}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8763, cityId: 20140301, entryDt: '2017-06-12T00:04:37-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8763, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22332.18, balanceAf: 22281.93}, to: {id: 60, name: 'BOA Visa', balanceBf: 11679.32, balanceAf: 11629.07}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8571, cityId: 20140301, entryDt: '2017-04-17T15:12:23-05:00', entryMonth: '2017-04-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50, transDt: '2017-04-12', transMonth: '2017-04-01', seq: 8571, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22598.88, balanceAf: 22548.88}, to: {id: 83, name: 'Chase Freedom', balanceBf: -801.74, balanceAf: -851.74}}, adhoc: false, adjust: true, status: true, tallied: false, tallyDt: null}, {id: 8570, cityId: 20140301, entryDt: '2017-04-17T15:10:05-05:00', entryMonth: '2017-04-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 100, transDt: '2017-04-11', transMonth: '2017-04-01', seq: 8570, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22698.88, balanceAf: 22598.88}, to: {id: 60, name: 'BOA Visa', balanceBf: 10875.58, balanceAf: 10775.58}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}];
      const tr = {id: 8763, cityId: 20140301, entryDt: '2017-06-12T00:04:37-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment paid', amount: 250.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8763, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22332.18, balanceAf: 22281.93}, to: {id: 60, name: 'BOA Visa', balanceBf: 11679.32, balanceAf: 11629.07}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'};

      explistService.data.currPageNo = 0;
      expect(explistService.data.pgData.rows).to.be.empty;
      expect(explistService.data.maxPageNo).to.equal(0);
      expect(explistService.data.total).to.equal(0);
      explistService.loadCurrentPage();

      explistService.modifyItem(tr);
      const idx = _.findIndex(explistService.data.pgData.rows, ['id', 8763]);
      const idx2 = _.findIndex(explistService.data.rows, ['id', 8763]);

      expect(idx).to.equal(-1);
      expect(explistService.data.pgData.rows.length).to.equal(4);
      expect(explistService.data.rows.length).to.equal(9);
      expect(explistService.data.maxPageNo).to.equal(2);
      expect(explistService.data.total).to.equal(701.75);
      expect(explistService.data.rows[idx2].description).to.equal('CC Bill Payment paid');
    });
    it('should deleteItem - user in same page', function () {
      explistService.data.rowCount = 4;
      explistService.data.rows = [{id: 8771, cityId: 20140301, entryDt: '2017-06-12T00:15:54-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8771, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22030.68, balanceAf: 21980.43}, to: {id: 60, name: 'BOA Visa', balanceBf: 11377.82, balanceAf: 11327.57}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8770, cityId: 20140301, entryDt: '2017-06-12T00:15:34-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8770, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22080.93, balanceAf: 22030.68}, to: {id: 60, name: 'BOA Visa', balanceBf: 11428.07, balanceAf: 11377.82}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8769, cityId: 20140301, entryDt: '2017-06-12T00:12:47-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8769, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22131.18, balanceAf: 22080.93}, to: {id: 60, name: 'BOA Visa', balanceBf: 11478.32, balanceAf: 11428.07}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8768, cityId: 20140301, entryDt: '2017-06-12T00:10:21-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8768, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22181.43, balanceAf: 22131.18}, to: {id: 60, name: 'BOA Visa', balanceBf: 11528.57, balanceAf: 11478.32}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8767, cityId: 20140301, entryDt: '2017-06-12T00:09:44-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8767, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22231.68, balanceAf: 22181.43}, to: {id: 60, name: 'BOA Visa', balanceBf: 11578.82, balanceAf: 11528.57}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8766, cityId: 20140301, entryDt: '2017-06-12T00:05:16-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8766, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22281.93, balanceAf: 22231.68}, to: {id: 60, name: 'BOA Visa', balanceBf: 11629.07, balanceAf: 11578.82}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8763, cityId: 20140301, entryDt: '2017-06-12T00:04:37-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8763, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22332.18, balanceAf: 22281.93}, to: {id: 60, name: 'BOA Visa', balanceBf: 11679.32, balanceAf: 11629.07}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8571, cityId: 20140301, entryDt: '2017-04-17T15:12:23-05:00', entryMonth: '2017-04-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50, transDt: '2017-04-12', transMonth: '2017-04-01', seq: 8571, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22598.88, balanceAf: 22548.88}, to: {id: 83, name: 'Chase Freedom', balanceBf: -801.74, balanceAf: -851.74}}, adhoc: false, adjust: true, status: true, tallied: false, tallyDt: null}, {id: 8570, cityId: 20140301, entryDt: '2017-04-17T15:10:05-05:00', entryMonth: '2017-04-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 100, transDt: '2017-04-11', transMonth: '2017-04-01', seq: 8570, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22698.88, balanceAf: 22598.88}, to: {id: 60, name: 'BOA Visa', balanceBf: 10875.58, balanceAf: 10775.58}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}];

      explistService.data.currPageNo = 1;
      expect(explistService.data.pgData.rows).to.be.empty;
      expect(explistService.data.maxPageNo).to.equal(0);
      expect(explistService.data.total).to.equal(0);
      explistService.loadCurrentPage();

      explistService.deleteItem(8766);
      const idx = _.findIndex(explistService.data.pgData.rows, ['id', 8766]);
      const idx2 = _.findIndex(explistService.data.rows, ['id', 8766]);
      const idx3 = _.findIndex(explistService.data.pgData.rows, ['id', 8570]);

      expect(idx).to.equal(-1);
      expect(idx2).to.equal(-1);
      expect(idx3).to.equal(3);
      expect(explistService.data.pgData.rows.length).to.equal(4);
      expect(explistService.data.rows.length).to.equal(8);
      expect(explistService.data.maxPageNo).to.equal(1);
      expect(explistService.data.total).to.equal(451.50);
    });
    it('should deleteItem - user in different page', function () {
      explistService.data.rowCount = 4;
      explistService.data.rows = [{id: 8771, cityId: 20140301, entryDt: '2017-06-12T00:15:54-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8771, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22030.68, balanceAf: 21980.43}, to: {id: 60, name: 'BOA Visa', balanceBf: 11377.82, balanceAf: 11327.57}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8770, cityId: 20140301, entryDt: '2017-06-12T00:15:34-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8770, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22080.93, balanceAf: 22030.68}, to: {id: 60, name: 'BOA Visa', balanceBf: 11428.07, balanceAf: 11377.82}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8769, cityId: 20140301, entryDt: '2017-06-12T00:12:47-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8769, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22131.18, balanceAf: 22080.93}, to: {id: 60, name: 'BOA Visa', balanceBf: 11478.32, balanceAf: 11428.07}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8768, cityId: 20140301, entryDt: '2017-06-12T00:10:21-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8768, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22181.43, balanceAf: 22131.18}, to: {id: 60, name: 'BOA Visa', balanceBf: 11528.57, balanceAf: 11478.32}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8767, cityId: 20140301, entryDt: '2017-06-12T00:09:44-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8767, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22231.68, balanceAf: 22181.43}, to: {id: 60, name: 'BOA Visa', balanceBf: 11578.82, balanceAf: 11528.57}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8766, cityId: 20140301, entryDt: '2017-06-12T00:05:16-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8766, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22281.93, balanceAf: 22231.68}, to: {id: 60, name: 'BOA Visa', balanceBf: 11629.07, balanceAf: 11578.82}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8763, cityId: 20140301, entryDt: '2017-06-12T00:04:37-05:00', entryMonth: '2017-06-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50.25, transDt: '2017-05-15', transMonth: '2017-05-01', seq: 8763, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22332.18, balanceAf: 22281.93}, to: {id: 60, name: 'BOA Visa', balanceBf: 11679.32, balanceAf: 11629.07}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}, {id: 8571, cityId: 20140301, entryDt: '2017-04-17T15:12:23-05:00', entryMonth: '2017-04-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 50, transDt: '2017-04-12', transMonth: '2017-04-01', seq: 8571, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22598.88, balanceAf: 22548.88}, to: {id: 83, name: 'Chase Freedom', balanceBf: -801.74, balanceAf: -851.74}}, adhoc: false, adjust: true, status: true, tallied: false, tallyDt: null}, {id: 8570, cityId: 20140301, entryDt: '2017-04-17T15:10:05-05:00', entryMonth: '2017-04-01', category: {id: 0, name: ' ~ '}, description: 'CC Bill Payment', amount: 100, transDt: '2017-04-11', transMonth: '2017-04-01', seq: 8570, accounts: {from: {id: 62, name: 'BOA - 7787', balanceBf: 22698.88, balanceAf: 22598.88}, to: {id: 60, name: 'BOA Visa', balanceBf: 10875.58, balanceAf: 10775.58}}, adhoc: false, adjust: true, status: true, tallied: true, tallyDt: '2017-06-22T00:11:27-05:00'}];

      explistService.data.currPageNo = 0;
      expect(explistService.data.pgData.rows).to.be.empty;
      expect(explistService.data.maxPageNo).to.equal(0);
      expect(explistService.data.total).to.equal(0);
      explistService.loadCurrentPage();

      explistService.deleteItem(8766);
      const idx = _.findIndex(explistService.data.pgData.rows, ['id', 8766]);
      const idx2 = _.findIndex(explistService.data.rows, ['id', 8766]);

      expect(idx).to.equal(-1);
      expect(idx2).to.equal(-1);
      expect(explistService.data.pgData.rows.length).to.equal(4);
      expect(explistService.data.rows.length).to.equal(8);
      expect(explistService.data.maxPageNo).to.equal(1);
      expect(explistService.data.total).to.equal(451.50);
    });
    afterEach('rollback mocks', function () {});
  });
  after('do nothing', function () {});
});
